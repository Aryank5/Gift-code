<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gift Hub — DmWin</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
:root{
  --primary:#00ff80;
  --secondary:#00aaff;
  --bg:#000;
  --text:#e6ffe6;
  --card-bg: rgba(0,255,128,0.04);
  --radius:16px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:var(--bg);
  color:var(--text);
  font-family:Poppins,system-ui,Segoe UI,Roboto;
  padding:24px;
  min-height:100vh;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(0,255,128,0.04) 0%, transparent 20%),
    radial-gradient(circle at 90% 80%, rgba(0,170,255,0.03) 0%, transparent 20%);
}
.container{max-width:920px;margin:0 auto}
.title{display:flex;gap:12px;align-items:center;color:var(--primary);font-weight:700;font-size:26px;text-shadow:0 0 8px rgba(0,255,128,0.15)}
.subtitle{opacity:.78;margin-top:6px;margin-bottom:18px}
.gift-container{
  border:1px solid rgba(0,255,128,0.12);
  background:var(--card-bg);
  padding:18px;border-radius:var(--radius);
  box-shadow:0 6px 30px rgba(0,255,128,0.03);
}
.gift-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
.app-info{display:flex;align-items:center;gap:12px}
.app-logo{width:60px;height:60px;border-radius:12px;border:2px solid var(--primary);object-fit:cover}
.app-name{font-size:20px;color:var(--primary);font-weight:600}
.register-btn{border:2px solid var(--secondary);padding:8px 14px;border-radius:12px;text-decoration:none;color:var(--secondary);font-weight:600}
.register-btn:hover{background:var(--secondary);color:var(--bg)}
.code-box{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:12px;margin-top:14px;border:1px solid rgba(0,255,128,0.12);background:rgba(0,255,120,0.04)}
.code-text{font-weight:600;font-size:18px;letter-spacing:1px}
.copy-btn{background:transparent;border:1px solid var(--primary);padding:10px;border-radius:10px;cursor:pointer;font-size:18px;color:var(--primary)}
.copy-btn:hover{background:var(--primary);color:var(--bg)}
.update{margin-top:12px;opacity:.8;font-size:14px}
.features{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-top:18px}
.feature-card{padding:12px;border-radius:10px;border:1px solid rgba(0,255,128,0.06);background:rgba(0,255,128,0.02);text-align:center}
.feature-icon{font-size:20px;color:var(--primary);margin-bottom:8px}
.footer{margin-top:20px;text-align:center;opacity:.7;border-top:1px solid rgba(0,255,128,0.05);padding-top:14px}

/* Toast */
#toast{position:fixed;left:50%;transform:translateX(-50%);top:-60px;background:rgba(0,255,120,0.08);border:1px solid var(--primary);padding:10px 18px;border-radius:12px;color:var(--primary);font-weight:700;transition:all .35s;z-index:9999}
#toast.show{top:22px;opacity:1}
</style>
</head>
<body>
<div class="container">
  <h1 class="title"><i class="fas fa-gift"></i> Gift Hub</h1>
  <p class="subtitle">Claim your exclusive rewards and bonuses — hosted on GitHub Pages</p>

  <div class="gift-container">
    <div class="gift-header">
      <div class="app-info">
        <img src="https://i.ibb.co/Mh0bJpW/dmwin.jpg" class="app-logo" alt="App logo">
        <div>
          <div class="app-name">DmWin</div>
          <div style="font-size:13px;opacity:.8">Official Gift Hub</div>
        </div>
      </div>
      <a href="#" id="registerLink" class="register-btn">Register Now</a>
    </div>

    <div class="code-box" style="margin-top:16px">
      <div>
        <div style="opacity:.7;font-size:13px">Gift Code</div>
        <div id="giftCode" class="code-text">No codes yet</div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <button class="copy-btn" id="copyBtn" title="Copy"><i class="far fa-copy"></i></button>
      </div>
    </div>

    <div class="update" id="updateDate">Updated: --/--/----</div>
    <div class="update" id="extraNote" style="font-size:13px;opacity:.8">Hosted on GitHub Pages — no Firebase.</div>
  </div>

  <div class="features" aria-hidden>
    <div class="feature-card"><div class="feature-icon"><i class="fas fa-bolt"></i></div><div style="font-weight:700">Instant Rewards</div><div style="opacity:.8;font-size:13px">Redeem immediately</div></div>
    <div class="feature-card"><div class="feature-icon"><i class="fas fa-sync-alt"></i></div><div style="font-weight:700">Daily Updates</div><div style="opacity:.8;font-size:13px">Updated by admin</div></div>
    <div class="feature-card"><div class="feature-icon"><i class="fas fa-shield-alt"></i></div><div style="font-weight:700">Secure</div><div style="opacity:.8;font-size:13px">No third-party analytics</div></div>
  </div>

  <div class="footer">© <span id="year"></span> DmWin — GitHub Pages</div>
</div>

<div id="toast"><i class="fas fa-check-circle"></i> Code copied</div>

<script>
/*
  Simple client-side Gift Hub.
  - Reads codes from localStorage key "giftHub_codes" (JSON array).
  - Reads "giftHub_active" (index of active code) or "giftHub_current" (string).
  - Admin page (admin.html) updates these keys in localStorage when both pages are hosted together in same origin.
  - APK_KEY placeholder (no Firebase).
*/

// Place your APK key here (only if you need to expose it in client; be careful)
const APK_KEY = "YOUR_APK_KEY_HERE"; // <-- replace with your APK key if needed

// UI elements
const giftCodeEl = document.getElementById('giftCode');
const updateDateEl = document.getElementById('updateDate');
const copyBtn = document.getElementById('copyBtn');
const yearEl = document.getElementById('year');

// default UI
yearEl.innerText = new Date().getFullYear();

function loadFromStorage() {
  // prefer single active code string
  const current = localStorage.getItem('giftHub_current');
  if (current) {
    giftCodeEl.innerText = current;
    updateDateEl.innerText = 'Updated: ' + (localStorage.getItem('giftHub_updated')||'--/--/----');
    return;
  }

  // else use array + active index
  try {
    const raw = localStorage.getItem('giftHub_codes');
    const arr = raw ? JSON.parse(raw) : [];
    const active = parseInt(localStorage.getItem('giftHub_active') || '0', 10);
    if (arr.length && Number.isFinite(active) && arr[active]) {
      giftCodeEl.innerText = arr[active].code || arr[active];
      updateDateEl.innerText = 'Updated: ' + (localStorage.getItem('giftHub_updated')||'--/--/----');
      return;
    }
  } catch(e){
    console.warn('giftHub load error', e);
  }

  giftCodeEl.innerText = 'No codes yet';
  updateDateEl.innerText = 'Updated: --/--/----';
}

copyBtn.addEventListener('click', async () => {
  const text = giftCodeEl.innerText;
  try{
    await navigator.clipboard.writeText(text);
    showToast();
  }catch(e){
    // fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    ta.remove();
    showToast();
  }
});

function showToast(){
  const t = document.getElementById('toast');
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), 1500);
}

// keep UI in sync if admin changes storage in another tab
window.addEventListener('storage', loadFromStorage);

// init
loadFromStorage();
</script>
</body>
</html>
